{"version":3,"sources":["../../src/utils/filepath-util.js"],"names":["adjustFilePath","filepath","sourceRoot","relativePath","_path","relative","split","sep","indexOf","hasExistDirectory","dirPath","stats","fs","lstatSync","isDirectory","e"],"mappings":"AAAA;AACA;;;;;;;;AACA;;AACA;;;;AACA;AACO,SAASA,cAAT,CAAwBC,QAAxB,EAAkCC,UAAlC,EAA8C;AACjD,MAAI,CAACA,UAAD,IAAe,CAAC,6BAAWD,QAAX,CAApB,EAA0C;AACtC,WAAOA,QAAP;AACH;;AACD,MAAIE,YAAY,GAAGC,KAAK,CAACC,QAAN,CAAeH,UAAf,EAA2BD,QAA3B,CAAnB;;AACA,MAAIE,YAAY,CAACG,KAAb,CAAmBF,KAAK,CAACG,GAAzB,EAA8BC,OAA9B,CAAsC,IAAtC,MAAgD,CAAC,CAArD,EAAwD;AACpD;AACA,WAAOP,QAAP;AACH;;AACD,SAAOE,YAAP;AACH;;AACM,SAASM,iBAAT,CAA2BC,OAA3B,EAAoC;AACvC,MAAI;AACA;AACA,QAAIC,KAAK,GAAGC,YAAGC,SAAH,CAAaH,OAAb,CAAZ,CAFA,CAIA;;;AACA,QAAIC,KAAK,CAACG,WAAN,EAAJ,EAAyB;AACrB,aAAO,IAAP;AACH;AACJ,GARD,CAQE,OAAOC,CAAP,EAAU;AACR,WAAO,KAAP;AACH;;AACD,SAAO,KAAP;AACH","sourcesContent":["// LICENSE : MIT\n\"use strict\";\nimport fs from \"fs\";\nimport isAbsolute from \"path-is-absolute\";\n// code from https://github.com/power-assert-js/espower-source\nexport function adjustFilePath(filepath, sourceRoot) {\n    if (!sourceRoot || !isAbsolute(filepath)) {\n        return filepath;\n    }\n    var relativePath = _path.relative(sourceRoot, filepath);\n    if (relativePath.split(_path.sep).indexOf(\"..\") !== -1) {\n        // if absolute filePath conflicts with sourceRoot, use filepath only.\n        return filepath;\n    }\n    return relativePath;\n}\nexport function hasExistDirectory(dirPath) {\n    try {\n        // Query the entry\n        var stats = fs.lstatSync(dirPath);\n\n        // Is it a directory?\n        if (stats.isDirectory()) {\n            return true;\n        }\n    } catch (e) {\n        return false;\n    }\n    return false;\n}\n"],"file":"filepath-util.js"}